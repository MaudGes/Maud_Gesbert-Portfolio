{% extends "base.html" %}
{% block title %}Aloe Vera{% endblock %}
{% block content %}

<h1>Sales Analysis</h1>

<!-- Collapsible: Description -->
<div class="collapsible-block">
  <h3 class="collapsible-toggle" onclick="toggleSection('description-section', this)">
    <span class="collapsible-title">Description</span>
    <span class="arrow-icon">▼</span>
  </h3>
  <div id="description-section" class="collapsible-content">
    <p>
      Analysis carried out for a young company selling Aloe Vera-based products.<br>
      The manager provided me with several CSV files: one containing sales data, one listing the salespeople,
      and another listing the customers (pharmacies).<br>
      By cross-referencing the different files, I was able to analyze the sales based on salespeople and customers,
      while also highlighting the times of the year when sales were highest.<br><br>
      <strong>Note:</strong> The data on customers and salespeople is anonymized. All names have been changed.<br>
      To respect the manager's request not to disclose too much information, I will only show an excerpt of the analysis.
    </p>
  </div>
</div>

<!-- Collapsible: PDF -->
<div class="collapsible-block">
  <h3 class="collapsible-toggle" onclick="toggleSection('pdf-section', this)">
    <span class="collapsible-title">Analysis Steps</span>
    <span class="arrow-icon">▼</span>
  </h3>
  <div id="pdf-section" class="collapsible-content">
    <div class="mt-4" style="height:600px; overflow:auto;">
      <object
        data="{{ url_for('static', filename='images/Aloe_Vera_EN.pdf') }}"
        type="application/pdf"
        width="100%"
        height="100%">
        <p>If your browser does not support PDFs:
          <a href="{{ url_for('static', filename='images/Aloe_Vera_EN.pdf') }}">Download the PDF</a>
        </p>
      </object>
    </div>
  </div>
</div>

<br><a href="/" class="btn">Back to Home</a>

<script>

// Toggle sections with animation
  function toggleSection(id, headerElement) {
    const section = document.getElementById(id);
    const arrow = headerElement.querySelector('.arrow-icon');
    
    const isOpen = section.style.display === "block" || section.style.display === "";

    if (isOpen) {
      section.style.display = "none";
      arrow.classList.remove("rotated");
    } else {
      section.style.display = "block";
      arrow.classList.add("rotated");
    }
  }

  // Open all collapsible sections by default on page load
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".collapsible-content").forEach(section => {
      section.style.display = "block";
    });

    document.querySelectorAll(".arrow-icon").forEach(icon => {
      icon.classList.add("rotated");
    });
  });
</script>

{% endblock %}
